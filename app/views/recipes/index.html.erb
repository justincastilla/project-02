<h1>All Recipes</h1>

<% if @recipes.length == 0 %>
  <h3>Ooops, we don't have any recipes with those ingredients. You should probably either go grocery shopping. <br /> ...or get creative with what you have! If it's tasty, let us know and submit a recipe!</h3>
<% end %>

<% @recipes.sort {|a,b| a.missing_ingredients <=> b.missing_ingredients}.each do |r| %>
  <div class="panel panel-default">
    <div class="panel-heading"><h1><%= link_to "#{r.title}", recipe_path(r) %></h1></div>
    <div class="panel-body">
    <img class="card-img-top" src='<%= r.image %>'>
    <h3>By <%= r.author %></h3>
    <p class="lead"><%= r.directions %></p>
    <% if r.missing_ingredients.length > 0 %>
    <hr />
      <h6>You're missing:</h6>
      <ul>
      <% r.missing_ingredients.each do |i| %>
        <li> <%= i.name %></li>
      <% end %>
      </ul>
    <% else %>
      <p>You should have everything that you need to make a <%= r.title %>. Bon appetit!</p>
    <% end %>
  </div>
</div>
</br>
<% end %>
